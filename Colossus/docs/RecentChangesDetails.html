<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Id: $ -->
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for Linux/x86 (vers 1st July 2002), see www.w3.org" />
    <title>Colossus: Recent changes</title>
</head>

<body>
<h1>Recent changes</h1>

This describes the recent changes in some more detail than just the
one-line-info on the main pages "News" section.

<h3>July 20, 2009: Public Build from r4440+</h3>
<p>
Yeah, it's been a long time since last Public Build. It might look we have 
been in winter sleep, but in fact in last 8 months we have done more changes 
(1000+ new revisions committed) than in last 5 years (for comparison: r2500 was in April 2004).</p>
<p>
But most of those changes were internal cleanup, refactoring, rewriting
some parts to make future changes easier and less error-prone, and so on;
and not so much directly user-visible changes and bugfixes.</p>
<p><font color="red">
<b>This new Build is incompatible (in all three aspects: "Save Game"-files, 
   Server/Client communication and Variant files) with the previous Public Build!</b></font></p>
<p>This means you can't load old saved games from earlier version, 
   and when playing over network one can't use previous' versions Network Client 
   to connect to a game running with new version aned vice versa.</p>
<p>
Below the highlights since last Public Testing Build (2008-10-29):</p>
<ul>
<li>A new AI type "ExperimentalAI". It uses some kind of genetic algorithm to find better
    "optimal battle move" combination (evaluating really all theoretically possible 
    combinations would simply take too long)</i>
<li>Added "Battle Dice Rolls history/scrolling functionality" 
    (thanks to Bruce for that!)</li>
<li>Added a Battle generator tool (mostly for internal use)</li>
<li>BattleLandsGenerator including BattleLandRandomizer now functional again (were broken for years)</li>
<li>Improvements to game loading error handling (from cmdline: wrong filename, 
    tolerate missing .xml extention, ...)</li>
<li>Changes to save game format, now version 2</li>
<li>"One todo done. 1.21 gigatodos still to go."</li>
<li>Fixed: 2057072 If game in trouble, "Save" might not work either:
    File => Save Game and Save Game As now done directly via "localServer"
    object, instead of via network message as earlier.</li>
<li>Added Tim Hoban's patch for #2352320, HumanHater being under-aggressive
    against other AIs. (Reworked onlyAIsRemain a bit.)</li>
<li>Improvements to "Public Game Server". But: No, it's still not ready to use yet :-/</li>
<li>Fixed: 2675045 NPE during createSummonAngel after Negotiation + related cleanup</li>
<li>Added Maven building. We have now a Continuous Integration build running which 
    creates site report (copy paste detector, dependencies, ...).</li>
<li>Basic functionality to suspend/resume a game, e.g./especially when AI's are playing.</li>
<li>Fixed:  Not all angel summons allowed - ID: 2316688</li>
<li>Changes to <b>Help - About</b> dialog:
<ul>
    <li>More informative build info (timestamp + user + revision instead of just revision)</li>
    <li>LogDirectory now derived from actual logging-property (instead of simply assuming it's still system temp dir)</li>
    <li>Dialog has now a meaningful title</li>
</ul></li>
<li>Also Game Setup (Get Players) dialog shows now the build info/version 
    (version is only properly set in official builds).</li>
<li>New Save Game format: includes now additionally a "redo" log part</li>
<li>Whole Save/Load game tragedy now in better shape:
<ul>
    <li>Saving of game now reliable for all situations except <i>during</i> engagements/battles. 
        I.e. one can save at any time during split, move or recruit, or between engagements/battles.</li>
    <li>When Saving, the splits/moves/recruits done since phase start "Done" can now be undone.</li>
    <li>Done button in correct state accordingly.</li>
    <li>Warning message when attempting to save during an engagement or battle: 
        this will not result in a save game from which one could continue playing.</li>
</ul></li>
<li>Added "autoDone" option (when nothing to recruit at all, or after last engagement).</li>
<li>Make SplitPrediction for equal-height children with 50% probability swap "keep" 
    or "split off". So, e.g. for initial split now it does not blindly assume any more 
    that the Titan stays in original legion and Angel is split off.</li>
<li>SaveGame and SaveGameAs menu items/actions stay disabled until game setup is completed.</li>
<li>Work ongoing to get Colossus part of Fedora (e.g. using now self-written 
    simple option parser instead of werken.opt)</li>
</ul>
<p>
<i>January 6, 2009: Changes listed below were already in Public Testing Build from r3541</i>
<ul>
<li>Fixed the problem that Quit in WebClient did not really directly Quit</li>
<li>Fixed: 2322870 Bogus packet (only half message written and then fully)</li>
<li>During pick color (and pick initial marker), display in the bottom bar 
    a message telling so</li>
<li>If game is already 512 turns (or more ;-) do not display the split history
    graph (would cause error messages)</li>
<li>Move WebClient classes to own, new package</li>    
<li>Improvements to the "accepting clients" handling</li>
<li>Quite some work on the "Scheduled Games" functionality for WebServer code</li>
<li>Made the "Load Extern Variant" mostly work (does probably not work if 
    there are remote players, and also load/save a game not totally ok).
    Details see bug tracker item: 2483419 
    "Custom variant: remote players? load game? instructions!"</li>
</ul>

<i>November 21, 2008: Changes listed below were already in Public Testing Build from r3500</i>
<ul>
<li>Several improvements to speed up loading of saved games:
<ul><li>Do not send events of legions of players that will be dead at the end</li>
    <li>Skip Caretaker Display and some other screen updates</li>
</ul></li>
<li>Quite some changes to things reported by "FindBugs" tool</li>
<li>Added in File Menu new item "Check Connection"</li>
<li>Fixed: 2128216 NW Stresstest opens GUI window and hangs</li>
<li>Some cleanup in accepting clients stuff (removed some redundant variables;
    send some message immediately after accepting the client</li>
<li>Improved handling for remote clients one game end with AutoQuit</li>    
</ul>

<hr></hr>

<h3>October 29, 2008: Public Build from r3455</h3>
<p>Changes since last Public Build (2008-10-10):</p>
<ul>
<li>Options are now loaded and saved based on whether it is AI or not,
    instead of depending on whether it is a &lt;bySomething&gt; name.</li>
<li>Fixed: [2081285] Preferences of &lt;by-.....&gt; named players:
    GetPlayers dialog now prevents &lt;byColor&gt; and &lt;byType&gt; 
    names for Human players</li>
<li>Fixed: [2158066] Unified has nonsensical mustering rule</li>
<li>Added label with info text "Click a creature for details!" in Caretaker</li>
<li>Clicking the chits in FullRecruitTree or HexRecruitTree also pops up now the 
    CreatureDetails (until then this could only be done in Caretaker)</li>
<li>Fixed: [870430] Attempt to Concede in a Battle you're not involved in</li>
<li>Fixed: 1900956 Nonentry of summoned or mustered unit</li>
<li>Fixed: 2167276 Doubled Reinforcements</li>
<li>Fixed: 2160218 Incorrect bramble effect on rangestrike</li>
<li>Fixed: CowardSimpleAI constants incorrectly affecting SimpleAI.
<li>Fixed the "multiple recruits possible" problem reported for Public Testing Build</li>
<li>Fixed that EventViewer showed all recruitings (after first battle) as "Reinforced"</li>
<li>Fixed: 1895129 carryover gui issue: should not close with "x"</li>
<li>Fixed: 2060183 Legion overwiew in user info window needs scrollbar</li>
<li>Fixed: 2060208 Legion split tree fails if too many legions</li>
</ul>
<h3>October 10, 2008: Public Build from r3425</h3>
<ul>
<li>Fixed: [ 2078529 ] "Preferences" =&gt; scales value is now read from cf file on startup.</li>
<li>Help=&gt;About now tell also the actual .colossus dir and also the 
    log directory where Colossus[012].log files will be created.</li>
<li>When game is over, MasterBoard tells so also in Title and in "phase" label,
    and DONE button invokes then the Quit/Close/New/Cancel dialog (same as closing
    the window with the "x" in upper corner always does).</li>
<li>When gameOver state reached, skip summon/reinforce + kick next engagement
    (perhaps we undo this skipping of summon/reinforce soon again...).</li>
<li>Fixed (hopefully): [ 2074220 ] Exception while loading game with dead players.
    This includes a lot of small changes related to loading/replaying a saved game.</li>
<li>Fixed: [ 2044310 ] LoadGame: wrong legions existing/content/location (same as 2074220) </li>
<li>During loading of a game the Masterboard Bottombar (where normally the phase is 
    displayed) shows a "replay ongoing - turn x of n (please wait)" text.</li>
<li>Fixed: [ 2090866 ] AI spinners wrong intialized</li>
<li>Fixed: [ 2091811 ] Preferences window should restore if requested from menu</li>
<li>Fixed: [ 585329 ] Net game lockup from negotiation window;
    (made sure that Negotiation and ReplyToProposal dialogs are closed when same
    type of dialog is opened; and close them when battle starts).</li>
<li>Feature Request [ 2083312 ] game type - pantheon 12: created a new variant 
    "BeelzeGods12" - it's basically Beelzebub12 with the Gods and some rules from 
    Pantheon.</li>
<li>When creating new BattleMap, dispose previous one, 
    in case it is still open for some reason...</li>
<li>Fixed: [ 2060169 ] Skipping rangestrike, rangestriker(s) stay highlighted</li>
<li>During serverSocket creation, catch any exception, not just IOException.
    Also first display an error message dialog, before doing System.exit().</li>
<li>Fixed the problem that games with remote players could not be loaded</li>
<li>When starting new or loaded game, wait until all clients have caught up with 
    load/preparations, before doing setupPhase to start the actual game.</li>
<li>StatusScreen window now does not use scale any more (see [ 2078529 ] Preferences)</li>
<li>Fixed: [ 2073991 ] Game hangs on AI Split</li>
<li>Fixed (partially): [ 2074220 ] Exception while loading game with dead players:  
    Now it can be loaded without exceptions, but it wants initially as many clients as
    originally players were involved; especially troublesome if there were remote clients
    that are dead now...</li>
<li>Removed SVG support and the Batik library</li>
<li>Slightly rephrased text in summon dialog and corrected catched to 
    caught in some method names ;-)</li>
<li>Tower teleport now only allowed from lands which really have the isTower
    attribute, not as before if they have a startlist (e.g. Abyssal, Mantio).
<li>Fixed the server-client communication, now (hopefully) the right way. 
    Several of the mysterious battle and game-end related bugs shouldn't 
    happen any more, e.g.:</li>
  <ul>
    <li>Fixed: [ 2072769 ] Game hangs when AI titan killed by AI </li>
    <li>Fixed (most likely):[ 2090150 ] Stack Counter left after a battle</li>
    <li>Fixed: [ 2095361 ] Game hangs when AI Titan killed</li>
    <li>Fixed: [ 2097773 ] Battlemat fails to close</li>
    <li>Fixed: [ 2113621 ] Major battlemap bugs that end gameplay</li>
  </ul>
<li>Some corrections and improvements to CreatureDetails dialog</li>
<li>When user selects Quit, trigger a timer which would do a 
    System.exit() after 10 seconds - to make sure that the java/javaw
    process will really terminate.</li>
<li>Fixed: [ 2111020 ] After game completed, start new one: clients don't 
    come in<br />(when all expected clients did connect, stop listening to 
    socket and accepting connections)</li>
</ul>

<h3>August 22, 2008, Public Build made from r3332</h3>
<p>
A lot of things were changed this time. Some of them you as end-user might notice, some not...
<p>
<b><font color="red">Colossus requires now at least Java 1.5!</font></b>
<p>
<i>This time the changes in "oldest first" order
   (earlier they were mostly most recent first, or unordered...)</i>
<p>
<ul>
<li>Quite some internal cleanup, architectural changes (NIO, less threads, 
    started to share code between server and client instead of duplicate it, 
    rearranged java packages, game shutdown/cleanup more properly, memory freed, ...)</li>
<li>Changes which eliminate or at least provide more logging info related to 
    [ colossus-Bugs-1813362 ] "Battle hangs game, perhaps due to Java 1.5 ?" 
    {perhaps caused by GTK window Look &amp; Feel?}.</li>
<li>In Game setup a checkbox for "HotSeatMode". If mode is active,
    it restores on player change the <b>MasterBoard</b> of the active player and
    minimizes the others. <b>Does not cover the battle maps yet.</b>
    Also the satellites (game status, eventviewer, ...) come and go with 
    their respective MasterBoard.<br>
    So, something left to do here...</li>
<li>The items in the MasterBoard menu which are more like "Preferences" 
    (as opposed to: "actions") are now all moved into an own window 
    (Window=&gt;Preferences).<br>
    Documentation for Client is now accordingly split into two files 
    (actions in the menu, and meaning of the various Preferences items)</li>
<li>Includes now the <a href="WebClient.html">WebClient</a> (and 
    <a href="WebServer.html">WebServer</a>) functionality.<br>
    <b>We have the code working, but no server running :-( </b><br>
    <u>If you are willing to help organizing something into that direction, 
       don't hesitate to contact us!</u></li>
<li>Player name in the status screen stays in player's color. This allows
    telling who e.g. the green player was when green is dead.</li>
<li>Restricted logging to the Colossus classes.</li>
<li>Added "configure your favorite colors" functionality in Preferences.
<li>It's now possible to close the MasterBoard of a dead player (when several
    human players play on same computer). Earlier this would have quite the whole
    application. Also the dialogs related to Close and Quit are changed quite much.
<li>Closing the network client (or when it fails) you are back to the main
    GetPlayers dialog (instead of just whole application gone, as earlier).
    Web client dialog behaves the same.</li>
<li>Last Recently Used lists for server host and port work better now.</li>
<li>Network client has now a timeout and shows an error message when it fails, and
    dialog stays up, so one can try again.</li>
<li>Server port visible and modifyable in GetPlayers dialog.</li>
<li>New variant "Abyssal3" added.</li> 
<li>Various improvements to stresstest script.</li>
<li>A new (unfinished?) feature in the menu of the battle window: the new help
    menu contains an entry to show a summary of the terrains on the battle land.</li>
<li>A new dialog showing information about a player: a click on a
    player's name in the status screen shows a summary of a player including the
    legions and creatures currently owned.</li> 
<li>Improved log messages for earned points and half-points, and for acquiring, 
    and failures in acquiring.</li>
<li>Fixed: [ 1964752 ] Changing scale value sometimes causes exception.</li>
<li>Bugfix: the AI hints for the Undead variant were fixed so the AIs should go
    for a third Naga in Plains if a Griffin could be mustered on the next move.
    Also some other (minor) special creatures/lands typos in variant data fixed.</li>
<li>PickMarker and PickColor dialog layout changed to avoid wrap situations.</li>
<li>Angel Summoning changed: instead of the 2-step-procedure (select legion 
    on masterboard and then creature from legion in dialog) the dialog shows
    now all possible donors with the summonables red bordered. And the dialog
    contains some text instructing how to used it.</li>
<li>Negotiations (offer and accept) do work now.</li>
<li>Autosave filenames (and those created by just "File=&gt;Save" without specifying 
    own filename), are now long style; i.e. at the end they contain info about
    turn number, active player and phase.</li>
<li>In new SummonAngel dialog, Titan in possible donor legion is now shown in 
    player color with right power value (instead of the black default icon)</li>
<li>In negotiation dialog (make offer), clicking on marker toggles whole legion 
    (all chits) to dead or all to not dead again.</li>
<li>Save preferences back to clients cf file also then when preferences dialog is
    "close"d (not only when client/masterboard is closed). </li>
<li>Fixed: [ 2044243 ] "After summon and left offboard, can't after battle summon"</li>
<li>Fixed: [ 700478 ] "mandatory strike skipped":
    DoneWithBattleMoves now checks that it's indeed move phase.</li>
<li>Fixed: [ 1859016 ] "Done key and box disabled ?randomly?": 
    "Done" action (Button &amp; Menu) should now be correctly en/disabled during normal play, 
    also for the non-active players; 
    (but the situation after loading a game is not handled yet [1702874]).</li>    
<li>Fixed: [ 2028230 ] Terrain penalties not applied in combat (ogre out of brambles)</li>    
<li>Fixed: [ 2058959 ] Angel can fly over volcano</li>
<li>Fixed: [ 2046854 ] If Titan is killed in negotiation, game does not end</li>
<li>Partly done FR [ 491247 ] "Closing a question box":
    In PickStrikePenalty dialog, added "cancel", and cancel or closing window 
    do now cancel the strike, rather than striking with default.</li>
<li>Fixed: [ 1895129 ] "carryover gui issue"; this means also partly done 
    FR [ 558825 ] "Clickable spillover":
    For picking carry targets, now clicking a valid target does the carry there,
    clicking anywhere else does not harm (dialog and carry mode keep alive).</li>
<li>Fixed: [ 1608709 ] Problem mustering when choice (make it impossible to bypass 
    the Pick Recruiter dialog via Done key shortcut)</li>
<li>Made the PickRecruit and PickRecruiter dialogs somewhat more informative.</li>
</ul>

<hr></hr>

yeah, a long time no changes visible to the public (=no public build).
But as you see above, a lot of things happened...

<hr></hr>

<h3>December 28, 2007, build r2890</h3>

Just a rebuild of same codebase to get also a proper ZIP file.

<h3>December 24, 2007, build r2882</h3>
Changes so far (just most recent first, i.e. NOT sorted by importance... ;-)
<ul>
<li>We have now the <a href="http://colossus.wiki.sourceforge.net/">Wiki 
    pages</a> in use. Mostly for developers, but there there are also web 
    start file(s) for more experimental builds - i.e. already some while 
    before the public build is done.<BR>
    For details check out the 
      <a href="http://colossus.wiki.sourceforge.net/ExperimentalBuilds">
    ExperimentalBuilds</a> wiki page.
<li>Improvements to Battle Map:
<ul>
<li>Shows the die roll needed to hit.
<li>Shows adjustments (get more/less dice due to hazard or rangestrike)
<li>Legion markers show near the legions entry side
<li>Done button, turn+phase+activePlayer indicator
<li>An own page in the docs folder describes the features of the Battle Map:
    <a href="BattleFeatures.html">Description for the features of the BattleMap window</a>.
    You can also find this page from the documentation index ("The full docs are here.")
    on Colossus main page.
    
</ul>
<li>Changes in EventViewer which should eliminate some (harmless?) exception
    in AWT Event Queue.
<li>Vendor tag in Java Web Start file now "Colossus development team"
    instead of David Ripton.
<li>Action key and menu item for "Done" now in sync with "Done" button.
<li>Default setting for legion visibility now "Ever revealed ..." instead
    of "Only own".
<li>Legion info popups: holding shift key, ever each legion will appear a
    small legion flyout showing it's contents, and if known the legion value.
    Holding control key, they are shown only for own legions.
<li>Improvements to "View Battle Map": land name now top-right, so the normal
    "Land name corresponds to land number on MasterBoard" rule applies now.
    Additionally it shows the neighbor lands (both in the title, 
    and in the map are inactive buttons telling e.g. "Left: Woods 39").
<li>A LOT of internal cleanup and corrections.
<li>Slightly improved handling of Save Game if directory "saves/" does
    not exist yet or can't even be created.
<li>List of hosts in Network Client now not user dependent any more,
    eliminated one possible NullPointerException (game would hang), and in 
    the alphabetically sorted list the Most Recently Used one is preselected.
<li>Some cleanup and fixing for AutoInspector and EventViewer regarding
    initial size, position, and showing/disposing code cleanup;
    size+location were forgotten/reset to default if EventViewer 
    was left disabled for one full game; now fixed.
<li>Inspector and show-legion (right-click) window show legion value 
    (and owner, if not own legion) in title; concede and flee dialog also
    show legion values (=> feature requests [1818878] and [ 503862 ]).
<li>If duplicate player names, tell this as message box, instead of
    silently just doing *nothing*.
<li>Engagement window collects now all results, no matter whether it is
    enabled or not, and does not forget old results when closed; and if 
    at game start (saved via options) enabled, it *IS* vsible (even if
    empty). I.e. it behaves like all other satellite windows.
<li>Game Setup window is now a JFrame (instead of being a JDialog as it 
    was before) which means, it can be minimized, and has own taskbar icon.
<li>EngagementResult and EventViewer windows now handle time-losses
    properly (before, they just told "won in 8 turns" and "destroyed").
<li>Updated in documents that recommended Java version is now 1.4.2.
<li>After the fix for [1769985], when used Load Game button player 
    types and names were all wiped out. This is now corrected again.
<li>Most likely fixed now:  [1789116] and [1737239] ("Illegal move" message
    when going with a 4 up to tundra/mountain).
<li>Fixed: [ 1758248 ] Help - About is now also shown even if autoplay
    is on.
</ul>
<h3>September 6 2007, build r2711</h3>
Only minor changes:
<ul>
<li>Fixing: [ 1769985 ] "Auto quit when game over never changes"<BR>
In GetPlayer dialog options are also saved when using Load Game, 
not only when starting new game.
<li>The dialog box for "Illegal move" tells now a more concrete reason why
the server considers this move illegal. This is related to [1789116] and 
[1737239] (attempt to move from Plain 29 to Tundra 2000 and one gets
this message eventhough this move should be allowed).<BR>
Hopefully with this improved message this gives a clue what is wrong there.
</ul>
<h3>July 24 2007, build r2706</h3>
Most relevant changes:
<ul>
<li>MasterBoard menu items significantly rearranged:
  <ul>
  <li>Player menu now called Autoplay
  <li>Part of Graphics menu items moved into new "Window" menu 
  <li>Look & Feel under new Windows menu instead of being own menu
  </ul>
<li>"Show all recruit chits" replaced with 4-choice selection whether to show "None", "Strongest", "Recruit Hint", "All".
<li>Addtional event in EventViewer to show "Masterboard movement roll"
<li>Various bugfixes
<li>Documentation updated:
  <ul>
  <li>Added a doc describing all the <a href="ClientOptions.html">Client side options (in MasterBoard menu)</a>.
  <li>A document describing all the <a href="GetPlayersOptions.html">options/settings available during game startup (in Get Player selection dialog)</a> was already added few weeks ago.
  <li>Smaller other updates, corrections, NAME-tag adding in various other HTML-doc files.
  </ul>
</li>
</ul>
